# Kolibri Clean v4

> Автор и владелец разработки: **Кочуров Владислав Евгеньевич**

Kolibri Clean v4 — это эталонная реализация журнала действий с детерминированной
подписью и набором модулей Kolibri-x для экспериментов с мультимодальным
планировщиком, приватностью и офлайн-режимом. Репозиторий служит точкой
сборки для команды разработки: здесь описаны архитектура, процессы
разработки и правила сопровождения.

## Fractal-10 Positioning

Каждый шаг Kolibri кодируется десятизначным фрактальным адресом `fa`. Цифры
получаются из голосов агентов и задают иерархию преобразований DSL-формулы
по уровням масштаба. Адрес, его стабильность (`fa_stab`) и карта
преобразований (`fa_map`) попадают в криптографический журнал. Это делает
траекторию рассуждения адресуемой, проверяемой и воспроизводимой. См.
[docs/fractal.md](docs/fractal.md).

## Что входит в платформу

- **Детерминированные журналы**: C-бэкенд формирует цепочку JSONL-записей и
  проверяет их целостность через `hash` и `hmac`, вычисляемые над теми же
  байтами, что попадают в лог.
- **Мультимодальное ядро Kolibri-x**: набор легковесных энкодеров,
  планировщик, граф знаний и рантайм-оркестратор, моделирующие целевую
  архитектуру Kolibri.
- **Приватность и персонализация**: локальный оператор согласий,
  офлайн-кэш, эмпатический модуль и песочницы навыков.
- **Наблюдаемость и XAI**: журнал рассуждений, аудиторские следы и
  инструменты повторного прогоня.
- **Дорожная карта развития**: согласованный план поставки возможностей
  Kolibri-x и чек-листы качества.

## С чего начать новой команде

1. Прочитайте [портал документации](docs/index.md) — он связывает все
   материалы и даёт обзор потоков.
2. Настройте окружение по инструкции из
   [developer-handbook](docs/developer_handbook.md).
3. Соберите и запустите журнал с помощью `make bin/kolibri_run` или
   `./build_macos.sh bin/kolibri_run` (Makefile требует полный путь к цели),
   затем воспроизведите базовый сценарий, следуя
   [runtime-operations](docs/runtime_and_operations.md).
4. Перед изменениями сверяйтесь с [roadmap](docs/roadmap.md) и
   [architecture](docs/architecture.md), чтобы понимать контекст.

## Быстрый старт

### macOS
```bash
./build_macos.sh bin/kolibri_run
# без ключа
unset KOLIBRI_HMAC_KEY
./bin/kolibri_run configs/kolibri.json
./bin/kolibri_verify logs/chain.jsonl
# с ключом
# export KOLIBRI_HMAC_KEY="secret"
# ./bin/kolibri_run configs/kolibri.json && ./bin/kolibri_verify logs/chain.jsonl
```

### Ubuntu / Debian
```bash
sudo apt-get update && sudo apt-get install -y build-essential libssl-dev pkg-config
make -j"$(nproc)" bin/kolibri_run
```

Команда `make tests` собирает вспомогательные бинарники и прогоняет
регрессионные проверки. Для одиночного теста голосования можно вызвать
`make test`.

## Структура репозитория

| Каталог | Содержимое |
| --- | --- |
| `backend/` | C-бэкенд журнала: DSL формул, поиск, верификация, CLI. |
| `bin/` | Скомпилированные утилиты `kolibri_run`, `kolibri_verify`, `kolibri_replay` и тесты. |
| `configs/` | Конфигурации запуска, например `kolibri.json`. |
| `docs/` | Полный комплект документации (архитектура, процессы, roadmap). |
| `kolibri_x/` | Модульная Python-реализация компонентов Kolibri-x. |
| `tests/` | Python и C-тесты для DSL, агрегации и бэкенда. |
| `logs/` | Журналы выполнения (`chain.jsonl`), создаются во время запуска. |

Дополнительные сведения по каждому модулю собраны в
[module reference](docs/module_reference.md).

## Процессы разработки

- Всегда запускайте `make tests` перед коммитом. Это быстрый набор
  проверок, который гарантирует целостность DSL и бенчмарков.
- Изменяя бэкенд, обновляйте схемы конфигураций в
  [runtime_and_operations.md](docs/runtime_and_operations.md).
- При добавлении новых возможностей синхронизируйтесь с дорожной картой и
  вносите изменения в [roadmap](docs/roadmap.md).
- Ведение журнала разработки, правила код-ревью и чек-листы описаны в
  [developer handbook](docs/developer_handbook.md).

## Документация и поддержка

- [docs/index.md](docs/index.md) — карта знаний проекта.
- Вопросы и предложения фиксируйте в issue-трекере. В каждом обсуждении
  указывайте релевантные разделы документации.
- За актуальность документов отвечает автор проекта — Кочуров Владислав
  Евгеньевич. Обновляйте материалы одновременно с кодом, чтобы команда
  всегда знала, как воспроизвести функциональность и продолжить работу.

