# Kolibri ИИ — локальный фрактальный движок

Kolibri — это офлайн-движок поиска формул, построенный на фрактальной экосистеме десяти цифр (0–9). Каждая цифра — агент, который хранит опыт, голосует за действия и обменивается знаниями с подцифрами. Движок написан на чистом C11, компилируется в native и wasm32-wasi, работает полностью локально и взаимодействует с пользователем через PWA-интерфейс.

## Структура репозитория

```
core/    # C-ядро: фрактал цифр, DSL, движок, цепочка памяти
wasm/    # glue-слой и скрипт сборки WebAssembly
ui/      # SPA/PWA интерфейс без внешних API
tools/   # офлайн-утилиты (chain_verify.js)
configs/ # параметры запуска
docs/    # спецификации DSL, голосования и хранения
```

## Быстрый старт (native)

```bash
make clean && make kolibri_native
./kolibri_native --ticks 5 --config configs/kolibri.json
```

> В минимальном варианте бинарь печатает метрики и последнюю формулу.

## Сборка wasm32-wasi

```bash
cd wasm
./build_wasm.sh
```

Скрипт генерирует `ui/kolibri.wasm`, который загружается фронтендом. Стандартных внешних API не требуется.

## PWA интерфейс

```bash
cd ui
python3 -m http.server 5173
# открыть http://localhost:5173
```

На странице доступны:

- чат (преобразуется в поток цифр),
- кнопка `Tick` для запуска одного шага,
- панель метрик `eff` и `compl`,
- хвост цепочки блоков.

## Тесты и проверки

- `make test_core` — unit-тесты для ядра (dsl, vote, chain).
- `node tools/chain_verify.js` — проверка целостности `kolibri_chain.jsonl`.
- `wasm/build_wasm.sh` — smoke-тест wasm-сборки.

## Документация

- [docs/DSL.md](docs/DSL.md) — описание DSL и правил построения формул.
- [docs/VOTING.md](docs/VOTING.md) — протокол голосования цифр.
- [docs/STORAGE.md](docs/STORAGE.md) — формат цепочки блоков и проверка хэшей.

## Синхронизация узлов

Kolibri может обмениваться журналами по протоколу `SYNC/1`. Параметры (`sync_enabled`, `node_id`, список `sync_peers`) задаются в `configs/kolibri.json`. После каждого шага локальный узел публикует блоки и подтягивает недостающие. Подробности и сценарии разрешения конфликтов описаны в [docs/STORAGE.md](docs/STORAGE.md).

## Лицензия

Проект предназначен для офлайн-экспериментов с фрактальными агентами. Поставляется «как есть» без внешних зависимостей и сетевых вызовов.
