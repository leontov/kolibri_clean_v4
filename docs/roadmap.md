
# Kolibri Public Beta Roadmap

## Tier-1 Verticals (Impact × Feasibility)
- **Планирование и агенты:** 9, 11, 12, 14, 16
- **Знания и верификация:** 18, 21, 23
- **Приватность и безопасность:** 33, 36, 37, 38
- **Навыки и маркетплейс:** 41, 43, 45, 46
- **Активное обучение и качество:** 57, 61, 62
- **Наблюдаемость и XAI:** 81, 83, 87
- **Производительность и SRE:** 89, 91, 94, 96
- **Edge и офлайн:** 97, 98
- **Управление качеством:** 121, 127

## Критические зависимости (DAG)
- SkillStore (41/45/46/43) ⟵ политики и песочница (33/36/38), наблюдаемость (81/87).
- Иерархический планировщик (9/12/14) ⟵ мультимодальная синхронизация (5), KG-верификация (18/23).
- Активное обучение (57/61/62) ⟵ mKSI/метрики (121), симуляции (65/69).
- Edge/офлайн (97/98) ⟵ кэш/конфликты (91/98), политики хранения (38).
- Zero-downtime (96) ⟵ реестр конфигов (95), очереди/приоритезация (92).

## Шестинедельный план (три спринта)

### Sprint C — «Бета-надёжность»
**Фокус:** безопасность, исполнение навыков, RAG-кэш.
- Песочница и политики: 33, 36, 38, 43, 45 → deny-by-default, лимиты CPU/NET/FS, токены по скоупам.
- SkillStore v1: 41, 46 → манифест, статический анализ публикаций.
- Кэш/стоимость: 91, 93 → RAG-кэш + алерты перерасхода.
- SLO/SLA: 89, 94 → p95/p99, профайлинг CPU/GPU, автоскейл.
**DoD:** p95 текст ≤ 200 мс; verify журналов зелёный; навык без разрешений не стартует и логирует причину; 10k запросов → crash-free ≥ 99.9%.

### Sprint D — «Ум и объяснимость»
**Фокус:** планирование, AL-петля, XAI.
- Планировщик: 9, 11, 12, 16 → иерархия задач, координация агентов, реплей удачных планов.
- Активное обучение: 57, 61, 62 → дрейф-мониторинг, автоконтрпримеры.
- XAI 1.1: 81, 83, 87 → карта рассуждений, доверительные интервалы, аудит-API.
**DoD:** mKSI ≥ 0.75 на 3 доменах; в 90% ответов XAI показывает источники и доверительный интервал; AL-петля снижает ошибку ≥ 10%.

### Sprint E — «Экосистема и офлайн»
**Фокус:** маркетплейс, Edge.
- Маркетплейс: 41, 47, 48, 44 → ранжирование по качеству/политикам, цепочки навыков, монетизация.
- Edge/офлайн: 97, 98, 100 → локальный пакет навыков, умный синк с разрешением конфликтов.
- Качество/роллбек: 121, 127 → контрольные точки mKSI, автоматический откат.
**DoD:** 5 сторонних навыков публикуются и откатываются; офлайн-режим проходит 5 сценариев синхронизации; A/B эксперименты включены.

## KPI и сигналы риска
- **mKSI:** ≥ 0.75 (G/P/A/R/E), рост к альфе ≥ +0.2.
- **Фактуальность RAG:** ≥ 98% подтверждённых утверждений при включённой верификации.
- **Безопасность:** 0 критических находок red-team; каждое исполнение навыка записывает подписанный журнал причин и ресурсов.
- **Производительность:** p95 текст ≤ 200 мс; ASR partials ≤ 300 мс; визуал ≤ 1.5 с до ключевого кадра.
- **Надёжность:** crash-free ≥ 99.9%; успешные воркфлоу ≥ 99%.

## Стабильные интерфейсы (мини-контракты)
```json
{
  "name": "kit.iot.thermostat",
  "version": "1.0.0",
  "inputs": ["intent", "sensor"],
  "permissions": ["iot.write:thermostat", "net.read:whitelist"],
  "limits": {"cpu_ms": 200, "ram_mb": 128, "wall_ms": 1000},
  "policy": {"pii": "deny", "export": "blocked"},
  "entry": "main.py"
}
```

```json
{"t":"2025-09-21T10:00:00Z","mod":"speech","sid":"u1","offset_ms":1234,"token":"привет"}
```

```json
{"ts":"…Z","skill":"kit.iot.thermostat","decision":"deny","reason":"scope-missing:iot.write","hash":"…"}
```

## Сквозной тест-набор (CI)
1. Policy-enforcement: навык без скоупа → блок, объяснение, подписанный лог.
2. RAG-конфликт: противоположные источники → ответ «неопределённо» + обе ссылки.
3. Планировщик: пересчёт плана при падении шага → замена узла, сохранение успехов.
4. AL-петля: при дрейфе данных модель запрашивает доп. примеры и снижает ошибку.
5. Офлайн→онлайн: конфликт правок → CRDT/LWW, без потери аудита.
6. Zero-downtime: канареечный релиз модели → автроллбек при деградации.

## Риски и страховки
- Jailbreak навыков → песочницы, ревокация ключей, deny-by-default, аудит-API.
- Дрейф качества → мониторинг mKSI по каналам релиза, авто-rollback.
- Стоимость вычислений → лимиты и алерты, гибридный оффлоад.
- Приватность → on-device by default, редактор PII.

## Первые 72 часа
1. Зафиксировать SLO в коде рантайма (p50/95/99 по каждому узлу пайплайна).
2. Включить policy-gates в SkillStore (deny-by-default + лог причин).
3. Поднять RAG-кэш с дедупликацией по контексту/пользователю.
4. Подключить mKSI-раннер в CI (G+P сразу, остальные — заглушки) и публиковать артефакт.
=======
# Roadmap Kolibri-x

> Куратор: Кочуров Владислав Евгеньевич. Каждая поставка должна сопровождать
> изменения в этом файле, чтобы команда понимала статус и следующие шаги.

## Стратегические цели

1. **MVP** — детерминированный журнал, базовые энкодеры, планировщик и
   офлайн-кэш.
2. **Интеллект и персонализация** — федеративное обучение, эмпатический слой,
   активное обучение и планировщик задач.
3. **Качество и UX** — XAI-консоль, миссии mKSI, защищённый мост IoT,
   контент-фильтры.

## План на 12 недель

| Этап | Недели | Основные результаты | Критерии приёмки |
| --- | --- | --- | --- |
| A — Фундамент | 1–4 | Энкодеры текста/аудио/изображений, прототип fusion, KG v1, RAG, SkillStore v1, лог рассуждений, базовая приватность | mKSI ≥ 0.55 на тестовых миссиях, верификация журналов, офлайн-режим без потерь данных |
| B — Интеллект | 5–8 | Профайлер + федеративное обучение, эмпатия, активное обучение, планировщик задач/воркфлоу | mKSI ≥ 0.65, успешная агрегация градиентов, автогенерация уточнений |
| C — Качество | 9–12 | XAI-панель, пакеты миссий, отчёты mKSI, IoT-мост (альфа) | mKSI ≥ 0.75, защищённые журналы IoT, UX-оценка ≥ 4.2/5 |

## Бэклог эпиков

- **Мультимодальное ядро**
  - Адаптивное перекрёстное внимание и динамическая глубина по модальностям.
  - Онлайновая компрессия видеопотоков без потери семантики.
- **Память и знания**
  - Гибридное хранение фактов (оперативная + долговременная память).
  - Автоматическая верификация фактов внешними критиками.
- **Приватность и безопасность**
  - Политики доступа с доказательствами (zk-SNARK).
  - Федеративная агрегация с защитой от отравления данных.
- **Активное обучение**
  - Движок выборки информативных примеров, симулятор экспертов, панель
    качества данных.
- **UX и интерфейсы**
  - Многоплатформенный UI, голосовой ассистент, режим совместного
    редактирования, AR-визуализация.
- **Экосистема разработчиков**
  - Портал документации, визуальный редактор навыков, аналитика авторов.

Полный перечень инициатив описан в предыдущем документе
`phase2_capabilities_roadmap.md`. При детализации задач переносите пункты в
соответствующие эпики и закрывайте их по факту реализации.

## Метрики mKSI

| Ось | Определение | Цель MVP | Цель этапа C |
| --- | --- | --- | --- |
| G — Generalisation | Точность на миссиях разных доменов/модальностей | ≥0.55 | ≥0.78 |
| P — Parsimony | Использование инструментов vs качество | ≤1.2x эталона | ≤1.05x |
| A — Autonomy | Вклад активного обучения | ≥10% прироста | ≥20% |
| R — Reliability | Повторяемость и офлайн-устойчивость | ≥95% | ≥98% |
| E — Explainability | Полнота ссылок, reasoning log | ≥85% | ≥95% |
| U — Usability | Время выполнения, удовлетворённость | ≥3.8/5 | ≥4.3/5 |

### Интерпретация рантайм-отчётов

- **G — Generalisation.** В `RuntimeMksiAggregator` показатель растёт при успешных
  прохождениях плановых шагов и использовании разных модальностей. Если `G`
  опускается ниже 0.5, расширяйте миссии и проверяйте корректность
  сандбоксовых навыков.
- **P — Parsimony.** Расчёт идёт от доли невыполненных шагов плана. Рост >0.8
  показывает, что большинство задач закрываются без избыточных вызовов
  инструментов.
- **A — Autonomy.** Накапливает штрафы за ответы из кэша и блокировки политик.
  Значение <0.6 сигнализирует, что AL-петли или политики требуют доработки.
- **R — Reliability.** Комбинирует успех шагов и попадание в SLO (`p95`).
  При <0.7 пересмотрите бюджеты задержек и нагрузочные тесты.
- **E — Explainability.** Сопоставляет плотность reasoning log и покрытие плана.
  Следите, чтобы значение не проваливалось при росте сложности миссий.
- **U — Usability.** Учитывает `p50` латентности и величину эмпатических
  корректировок. Падение обычно связано с перегруженной цепочкой или резкими
  настройками профайлера.

### CI-интеграция отчётов

1. Создайте экземпляр `KolibriRuntime` с параметрами `mksi_export_file` либо
   `mksi_http_endpoint`, чтобы включить выгрузку отчётов из рантайма.
2. В pipeline CI собирайте JSON-артефакт (`current` + `rolling`) и
   публикуйте его вместе с лентой журналов.
3. Используйте метки из таблицы целей, чтобы триггерить авто-rollback, если
   rolling mKSI падает ниже порогов.

## Управление рисками

| Риск | Митигирующие действия |
| --- | --- |
| Галлюцинации и недостоверность | Обязательная проверка доказательств, политика «лучше без ответа», двойное ревью фактов. |
| Нарушение приватности | Локальная обработка по умолчанию, аудит журналов, sandbox навыков. |
| Деградация производительности | Кеширование RAG, квантизация моделей, мониторинг CPU/GPU. |
| Управление сложностью | Версионирование контрактов, модульные интерфейсы, регулярные интеграционные миссии. |

## Процесс обновления roadmap

1. После каждого спринта фиксируйте фактические результаты (таблица прогресса).
2. Обновляйте статус эпиков: `Planned`, `In Progress`, `Delivered`, `On Hold`.
3. Поддерживайте связь с [architecture](architecture.md) и
   [developer_handbook](developer_handbook.md) — ссылки на актуальные API.
4. Документируйте метрики mKSI и SLA в отдельном разделе релиз-нотов.

