# Kolibri Public Beta Roadmap

## Tier-1 Verticals (Impact × Feasibility)
- **Планирование и агенты:** 9, 11, 12, 14, 16
- **Знания и верификация:** 18, 21, 23
- **Приватность и безопасность:** 33, 36, 37, 38
- **Навыки и маркетплейс:** 41, 43, 45, 46
- **Активное обучение и качество:** 57, 61, 62
- **Наблюдаемость и XAI:** 81, 83, 87
- **Производительность и SRE:** 89, 91, 94, 96
- **Edge и офлайн:** 97, 98
- **Управление качеством:** 121, 127

## Критические зависимости (DAG)
- SkillStore (41/45/46/43) ⟵ политики и песочница (33/36/38), наблюдаемость (81/87).
- Иерархический планировщик (9/12/14) ⟵ мультимодальная синхронизация (5), KG-верификация (18/23).
- Активное обучение (57/61/62) ⟵ mKSI/метрики (121), симуляции (65/69).
- Edge/офлайн (97/98) ⟵ кэш/конфликты (91/98), политики хранения (38).
- Zero-downtime (96) ⟵ реестр конфигов (95), очереди/приоритезация (92).

## Шестинедельный план (три спринта)

### Sprint C — «Бета-надёжность»
**Фокус:** безопасность, исполнение навыков, RAG-кэш.
- Песочница и политики: 33, 36, 38, 43, 45 → deny-by-default, лимиты CPU/NET/FS, токены по скоупам.
- SkillStore v1: 41, 46 → манифест, статический анализ публикаций.
- Кэш/стоимость: 91, 93 → RAG-кэш + алерты перерасхода.
- SLO/SLA: 89, 94 → p95/p99, профайлинг CPU/GPU, автоскейл.
**DoD:** p95 текст ≤ 200 мс; verify журналов зелёный; навык без разрешений не стартует и логирует причину; 10k запросов → crash-free ≥ 99.9%.

### Sprint D — «Ум и объяснимость»
**Фокус:** планирование, AL-петля, XAI.
- Планировщик: 9, 11, 12, 16 → иерархия задач, координация агентов, реплей удачных планов.
- Активное обучение: 57, 61, 62 → дрейф-мониторинг, автоконтрпримеры.
- XAI 1.1: 81, 83, 87 → карта рассуждений, доверительные интервалы, аудит-API.
**DoD:** mKSI ≥ 0.75 на 3 доменах; в 90% ответов XAI показывает источники и доверительный интервал; AL-петля снижает ошибку ≥ 10%.

### Sprint E — «Экосистема и офлайн»
**Фокус:** маркетплейс, Edge.
- Маркетплейс: 41, 47, 48, 44 → ранжирование по качеству/политикам, цепочки навыков, монетизация.
- Edge/офлайн: 97, 98, 100 → локальный пакет навыков, умный синк с разрешением конфликтов.
- Качество/роллбек: 121, 127 → контрольные точки mKSI, автоматический откат.
**DoD:** 5 сторонних навыков публикуются и откатываются; офлайн-режим проходит 5 сценариев синхронизации; A/B эксперименты включены.

## KPI и сигналы риска
- **mKSI:** ≥ 0.75 (G/P/A/R/E), рост к альфе ≥ +0.2.
- **Фактуальность RAG:** ≥ 98% подтверждённых утверждений при включённой верификации.
- **Безопасность:** 0 критических находок red-team; каждое исполнение навыка записывает подписанный журнал причин и ресурсов.
- **Производительность:** p95 текст ≤ 200 мс; ASR partials ≤ 300 мс; визуал ≤ 1.5 с до ключевого кадра.
- **Надёжность:** crash-free ≥ 99.9%; успешные воркфлоу ≥ 99%.

## Стабильные интерфейсы (мини-контракты)
```json
{
  "name": "kit.iot.thermostat",
  "version": "1.0.0",
  "inputs": ["intent", "sensor"],
  "permissions": ["iot.write:thermostat", "net.read:whitelist"],
  "limits": {"cpu_ms": 200, "ram_mb": 128, "wall_ms": 1000},
  "policy": {"pii": "deny", "export": "blocked"},
  "entry": "main.py"
}
```

```json
{"t":"2025-09-21T10:00:00Z","mod":"speech","sid":"u1","offset_ms":1234,"token":"привет"}
```

```json
{"ts":"…Z","skill":"kit.iot.thermostat","decision":"deny","reason":"scope-missing:iot.write","hash":"…"}
```

## Сквозной тест-набор (CI)
1. Policy-enforcement: навык без скоупа → блок, объяснение, подписанный лог.
2. RAG-конфликт: противоположные источники → ответ «неопределённо» + обе ссылки.
3. Планировщик: пересчёт плана при падении шага → замена узла, сохранение успехов.
4. AL-петля: при дрейфе данных модель запрашивает доп. примеры и снижает ошибку.
5. Офлайн→онлайн: конфликт правок → CRDT/LWW, без потери аудита.
6. Zero-downtime: канареечный релиз модели → автроллбек при деградации.

## Риски и страховки
- Jailbreak навыков → песочницы, ревокация ключей, deny-by-default, аудит-API.
- Дрейф качества → мониторинг mKSI по каналам релиза, авто-rollback.
- Стоимость вычислений → лимиты и алерты, гибридный оффлоад.
- Приватность → on-device by default, редактор PII.

## Первые 72 часа
1. Зафиксировать SLO в коде рантайма (p50/95/99 по каждому узлу пайплайна).
2. Включить policy-gates в SkillStore (deny-by-default + лог причин).
3. Поднять RAG-кэш с дедупликацией по контексту/пользователю.
4. Подключить mKSI-раннер в CI (G+P сразу, остальные — заглушки) и публиковать артефакт.
